<!doctype html>
<html lang="zh-cmn">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="css/register.css"/>
<link rel="stylesheet" href="css/layui.css"/>
<!-- <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css"> -->
<title>用户注册</title>
</head>
<body>
<div class="background"></div>
<div class="main">
    <div class="header">
        <div class="portal-logo">
            <img style="height:100%" src="images/hbug.png"/>
        </div>
		<div class="portal-title">
        会议室预约系统
        </div>
    </div>
	<div class="container">
        <div class="notice-panel">
            <div class="notice-box">
                <div class="notice-title">
                系统使用说明
                </div>
                <div class="notice-break-line"></div>
                <div class="notice-content">
                <p>1、会议室实行网上预约使用与管理。注意：必须提前一天进行预约。</p>
				<p>2、若使用QQ邮箱注册，用户可通过QQ邮箱绑定微信来接收消息。</p>
				<p>3、会议室预约时段为：8:00-18：00，超时段使用应在预约登记时做好备注说明。(提示：预约时间必须落在系统划定时间段内，时间需按照系统原有时间格式输入）</p>
				<p>4、如会议室多媒体设备使用前发生故障、损坏或配件丢失，要及时上报综合办公室，未及
      			时上报发现后责任一律由最后使用人承担。</p>
				<p>5、其他特殊情况或特殊需要用户可联系综合办公室。</p>

                </div>
            </div>
        </div>
        <div class="login-panel">
            <div class="login-box">
            
            <div id="nav" class="login-nav only-auth">
          
                <div class="on" data-type="local" id="local">用户注册</div>
         
            </div>
                <form class="el-form el-form--label-top" onsubmit="return false" >
                    <!-- method="POST" action="/do-login?local_login=true" -->
                    <input name="auth_type" type="hidden" value="local"/>
                    <div class="wechat-qrcode" style="margin-top: 20px">
                        
                        <div id="wechat-qrcode"></div>
                        
                    </div>
                
                    <div class="login-form-item">
                        <div class="el-input user-no">
                            <input  id="number" placeholder="职工号"
                                   type="text" name="username">
                        </div>
                    </div>
					<div class="login-form-item">
                        <div class="el-input user-input">
                            <input id="name" placeholder="姓名"
                                   type="text" name="username">
                        </div>
                    </div>
<!--					下拉样式-->
					<div class="login-form-item">
						  <datalist id="specialty">
							<option value="信息管理工程系"></option>  
                            <option value="财政学系"></option> 
                            <option value="会计系"></option>
                            <option value="工商管理系"></option> 
                            <option value="旅游管理系"></option>
                            <option value="档案学系"></option>
                            <option value="图书馆学系"></option>
                          </datalist>
<!--						选择框-->
						  <div class="el-input user-kind">
						 <input type="text" name="" id="department" list="specialty" placeholder="系别">
						  </div>
                    </div>

<!--						 <input type="text" name="" id="datashow" placeholder="系别">-->
<!--
                        <select class="form-control" placeholder="请输入姓名" id="select" onchange="change(this)"> 
                            <option value="1">信息管理工程系</option>  
                            <option value="2">财政学系</option> 
                            <option value="3">会计系</option>
                            <option value="4">工商管理系</option> 
                            <option value="5">旅游管理系</option>
                            <option value="6">档案学系</option>
                            <option value="7">图书馆学系</option>
                        </select>
						  <div class="el-input user-kind inner">
						 <input type="text" name="" id="datashow" placeholder="系别">
-->
                <!-- <div class="login-form-item">
                        <datalist id="specialty">
                            <option value="信息管理工程系"></option>  
                            <option value="财政学系"></option> 
                            <option value="会计系"></option>
                            <option value="工商管理系"></option> 
                            <option value="旅游管理系"></option>
                            <option value="档案学系"></option>
                            <option value="图书馆学系"></option>
                        </datalist>
                    <div class="el-input user-kind">
                <input type="text" id="department"  list="specialty" placeholder="系别">
                    </div>
                </div> -->

        			
                    <div class="login-form-item password-field"> 
                        <div class="el-input email-input">
                            <input id="mailbox" placeholder="邮箱地址" type="email" name="email">
                        </div>
                    </div>  
                    <div class="login-form-item password-field">
                        <div class="el-input password-input">
                            <input  placeholder="密码" id="pw" type="password" name="password">
                        </div>
                    </div>
					<div class="login-form-item password-field">
                        <div class="el-input password-input">
                            <input  placeholder="确认密码" id="pw2" type="password" name="password">
                        </div>
                    </div>
					<div class="login-form-item password-field">
                        <div class="el-input code-input"> 
                            <input  placeholder="验证码" id="code_input" type="text1" name="code1">  
                        </div>
						<div class="el-input loginCode" id="v_container"></div>
                    </div>
				    <button type="submit" id="my_button" onClick="submit1()" class="el-button-login" style="margin-bottom:20px;" > 
                        <span>注册</span>
                    </button>
					
						<a href="forget.html">忘记密码</a>
            			<a href="frontlogin.html">立即登录</a>
                </form>
                <div class="link-field">
                
                
                </div>
                <div class="mobile-notice-panel">
                    <div class="notice-box">
                        <div class="notice-break-line"></div>
                        <div class="notice-title">
                        系统使用说明
                        </div>
                        <div class="notice-content">
                            <p>1、会议室实行网上预约使用与管理。注意：最晚提前一天进行预约。</p>
                            <p>2、若使用QQ邮箱注册，用户可通过QQ邮箱绑定微信来接收消息。</p>
                            <p>3、会议室预约时段为：8:00-18：00，超时段使用应在预约登记时做好备注说明。(提示：预约时间必须落在系统划定时间段内，时间需按照系统原有时间格式输入）</p>
                            <p>4、建议使用电脑设备访问本系统。</p>
                            <p>5、如会议室多媒体设备使用前发生故障、损坏或配件丢失，要及时上报综合办公室，未及时上报发现后责任一律由最后使用人承担。</p>
                            <p>6、其他特殊情况或特殊需要用户可联系综合办公室。</p>
                        </div>
                    </div>
                </div> 
            </div>
            </div>
        </div>
</div> 
</body> 
<script src="js/wer.js"></script>
<script src="js/jquery-1.8.2.min.js"></script>
<!-- lst -->
<script type="text/javascript" src="js/utilcommon.js"></script>
<script src="js/layer-v3.1.1/layer/layer.js" ></script>
<script>
var verifyCode = new GVerify("v_container");
var num ;
var numbers;
function isnumber(){
  num  = $("#number").val();
    if( /^\d+$/.test(num) || num == ""){
        numbers = num;
       // console.log(numbers); 
       return 0;
    }else{
        layer.msg('教职工号：请输入数字');
    }
}
$("#number").on("input",function(){       
   isnumber();
});
function isEmail(){ 
  var email = $("#mailbox").val();
  if($("#mailbox").val().length != 0) {
    var reg =  /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
     //调用正则验证test()函数
     isok= reg.test(email);
       if(!isok) {
            alert("邮箱格式不正确，请重新输入！");
            document.getElementById("mailbox").focus();
            return false;
        }
    };  
}


function submit1(){
	var res = verifyCode.validate(document.getElementById("code_input").value);
	if(res) {
		if($("#pw").val() == $("#pw2").val()){
			// console.log("pw yes")
			if( $("#number").val().length==0 || $("#mailbox").val().length==0||$("#pw").val().length==0||$("#pw2").val().length==0){
            //   console.log(11)
      		}else if(isEmail() !=false){
				// console.log(22)
				var url = Config.host + "/front/register";
				var number = $("#number").val();
				var mailbox = $("#mailbox").val();
				var password = $("#pw").val();
				var name = $("#name").val();
				var department= $("#department").val();
				var data = {number: number, mailbox: mailbox,password:password,name:name,department:department};
				var func = function (returndata) {
					console.log(returndata.message);
					if (returndata.code == "999999") {
						alert(returndata.message);
					}else {
                        alert("注册申请已提交，请耐心等待。审核结果会通过邮件的形式通知您");
						location.href = "frontlogin.html";
					}
				}
				if(isnumber() == 0){
					AJAX.get(url,data,func);
				}
			}	
		}else{
			alert("请输入相同密码");
		}
	}else{
		alert("验证码错误");
	}	  
}
   
</script>
<!--	下拉选择专业js部分-->
<script language="javascript">
    function change(obj){
        var value = $(obj).find('option:selected').text();
        $('#datashow').val(value);
     }
</script>

</html>
